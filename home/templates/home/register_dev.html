{% extends "insights_base.html" %}
{% load static %}

{% block content %}


  <h1>Register</h1>
  {% if error_message %}
    <p>{{ error_message }}</p>
  {% endif %}
  <form method="post">
    {% csrf_token %}
    <label for="organization_name">Organization:</label>
    <input type="text" id="organization_name" name="organization_name" autocomplete="off">
    <input type="hidden" id="organization_id" name="organization_id">
    <br><br>
    <label for="technical_founder">Technical Co-Founder:</label>
    <input type="text" id="technical_founder" name="technical_founder">
    <br><br>
    <label for="agency">Software Development Agency:</label>
    <input type="text" id="agency" name="agency">
    <br><br>
    <button type="submit">Submit</button>
  </form>
  <script>
    $(function() {
      $("#organization_name").autocomplete({
        source: function(request, response) {
          $.getJSON("/api/organizations/", {
            name: request.term
          }, function(data) {
            response($.map(data, function(item) {
              return {
                label: item.name,
                value: item.name,
                id: item.id
              };
            }));
          });
        },
        minLength: 2,
        select: function(event, ui) {
          $("#organization_id").val(ui.item.id);
        }
      });
    });
  </script>


{% endblock content %}